apiVersion: v1
kind: Pod
metadata:
  name: fastapi-1
  namespace: robot-experiments
  labels:
    name: fastapi-pod-1
spec:
  containers:
  - name: fastapi-1
    image: gergelysoti/inference_server:2024-2-0.9
    ports:
      - containerPort: 8076
    resources:
      limits:
        cpu: 19200m
        memory: 41231686041600m
        nvidia.com/gpu: "1"
      requests:
        cpu: "16"
        memory: 32Gi
        nvidia.com/gpu: "1"
    volumeMounts:
      - mountPath: "/home/jovyan/data/"
        name: gergely-soti-shared-data-pvc-robot-experiments
  volumes:
    - name: gergely-soti-shared-data-pvc-robot-experiments
      persistentVolumeClaim:
        claimName: gergely-soti-shared-data-pvc-robot-experiments

---
apiVersion: v1
kind: Service
metadata:
  labels:
    name: fastapi-pod-1
  name: fastapi-1
  namespace: robot-experiments
spec:
  ports:
  - nodePort: 31705
    port: 8076
    protocol: TCP
    targetPort: 8076
  selector:
    name: fastapi-pod-1
  type: NodePort
